name: Mirror Docker Images

on:
    workflow_dispatch:
    push:
        branches:
            - master
    pull_request:
        branches:
            - master
    

jobs:
  mirror-alpine:
    uses: ./.github/workflows/mirror.yml
    with:
      source_image: docker.io/library/alpine
      version: 3.21.3
      target_package: ${{ github.repository_owner }}/alpine
    permissions:
      packages: write
      contents: read

  mirror-busybox:
    uses: ./.github/workflows/mirror.yml
    with:
      source_image: docker.io/library/busybox
      version: 1.37.0
      target_package: ${{ github.repository_owner }}/busybox
    permissions:
      packages: write
      contents: read

  mirror-kubectl:
    uses: ./.github/workflows/mirror.yml
    with:
      source_image: docker.io/bitnami/kubectl
      version: 1.33.0
      target_package: ${{ github.repository_owner }}/kubectl
    permissions:
      packages: write
      contents: read

  mirror-aws-cli:
    uses: ./.github/workflows/mirror.yml
    with:
      source_image: docker.io/
      version: 2.27.4
      target_package: ${{ github.repository_owner }}/aws-cli
    permissions:
      packages: write
      contents: read